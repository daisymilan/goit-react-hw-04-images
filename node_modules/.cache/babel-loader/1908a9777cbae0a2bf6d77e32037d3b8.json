{"ast":null,"code":"var _jsxFileName = \"/Users/daisymilan/Desktop/repo/React Projects/goit-react-hw-04-images/src/components/App.jsx\";\nimport React, { Component } from 'react';\nimport SearchBar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Button from './Button/Button';\nimport Loader from './Loader/Loader';\nimport { getAPI } from 'pixabay-api';\nimport styles from './App.module.css';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      images: [],\n      currentPage: 1,\n      searchQuery: '',\n      isLoading: false,\n      isError: false,\n      isEnd: false\n    };\n    this.fetchImages = async () => {\n      const {\n        searchQuery,\n        currentPage\n      } = this.state;\n      this.setState({\n        isLoading: true\n      });\n      try {\n        const response = await getAPI(searchQuery, currentPage);\n        console.log(response);\n        const {\n          totalHits,\n          hits\n        } = response;\n        if (hits.length === 0) {\n          toast.error('Sorry, there are no images matching your search query. Please try again.');\n          this.setState({\n            isLoading: false\n          });\n          return;\n        }\n        if (currentPage === 1) {\n          toast.success(`Hooray! We found ${totalHits} images!`);\n        }\n        if (currentPage * 12 >= totalHits) {\n          this.setState({\n            isEnd: true\n          });\n          toast(\"We're sorry, but you've reached the end of search results.\", {\n            icon: '👏',\n            style: {\n              borderRadius: '10px',\n              background: '#333',\n              color: '#fff'\n            }\n          });\n        }\n        this.setState(prevState => ({\n          images: currentPage === 1 ? hits : [...prevState.images, ...hits],\n          isEnd: prevState.images.length + hits.length >= totalHits\n        }));\n      } catch (error) {\n        this.setState({\n          isError: true\n        });\n        toast.error('Oops, something went wrong! Reload this page!');\n      } finally {\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n    this.handleSearchSubmit = query => {\n      const normalizedQuery = query.trim().toLowerCase();\n      const normalizedCurrentQuery = this.state.searchQuery.toLowerCase();\n      if (normalizedQuery === '') {\n        alert(`Empty string is not a valid search query. Please type again.`);\n        return;\n      }\n      if (normalizedQuery === normalizedCurrentQuery) {\n        alert(`Search query is the same as the previous one. Please provide a new search query.`);\n        return;\n      }\n      if (normalizedQuery !== normalizedCurrentQuery) {\n        this.setState({\n          searchQuery: normalizedQuery,\n          currentPage: 1,\n          images: [],\n          isEnd: false\n        });\n      }\n    };\n    this.handleLoadMore = () => {\n      if (!this.state.isEnd) {\n        this.setState(prevState => ({\n          currentPage: prevState.currentPage + 1\n        }));\n      } else {\n        alert(\"You've reached the end of the search results.\");\n      }\n    };\n  }\n  async componentDidUpdate(_prevProps, prevState) {\n    const {\n      searchQuery,\n      currentPage\n    } = this.state;\n    if (prevState.searchQuery !== searchQuery || prevState.currentPage !== currentPage) {\n      await this.fetchImages();\n    }\n  }\n  render() {\n    const {\n      images,\n      isLoading,\n      isError,\n      isEnd\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.App,\n      children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n        onSubmit: this.handleSearchSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImageGallery, {\n        images: images\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 23\n      }, this), !isLoading && !isError && images.length > 0 && !isEnd && /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.handleLoadMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), isError && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Something went wrong. Please try again later.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n        position: \"top-right\",\n        reverseOrder: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","SearchBar","ImageGallery","Button","Loader","getAPI","styles","toast","Toaster","jsxDEV","_jsxDEV","App","constructor","arguments","state","images","currentPage","searchQuery","isLoading","isError","isEnd","fetchImages","setState","response","console","log","totalHits","hits","length","error","success","icon","style","borderRadius","background","color","prevState","handleSearchSubmit","query","normalizedQuery","trim","toLowerCase","normalizedCurrentQuery","alert","handleLoadMore","componentDidUpdate","_prevProps","render","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","onClick","position","reverseOrder"],"sources":["/Users/daisymilan/Desktop/repo/React Projects/goit-react-hw-04-images/src/components/App.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport SearchBar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport Button from './Button/Button';\nimport Loader from './Loader/Loader';\nimport { getAPI } from 'pixabay-api';\nimport styles from './App.module.css';\nimport toast, { Toaster } from 'react-hot-toast';\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    isError: false,\n    isEnd: false,\n  };\n\n  async componentDidUpdate(_prevProps, prevState) {\n    const { searchQuery, currentPage } = this.state;\n\n    if (\n      prevState.searchQuery !== searchQuery ||\n      prevState.currentPage !== currentPage\n    ) {\n      await this.fetchImages();\n    }\n  }\n\n  fetchImages = async () => {\n    const { searchQuery, currentPage } = this.state;\n\n    this.setState({ isLoading: true });\n\n    try {\n      const response = await getAPI(searchQuery, currentPage);\n\n      console.log(response);\n\n      const { totalHits, hits } = response;\n\n      if (hits.length === 0) {\n        toast.error(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        this.setState({ isLoading: false });\n        return;\n      }\n\n      if (currentPage === 1) {\n        toast.success(`Hooray! We found ${totalHits} images!`);\n      }\n\n      if (currentPage * 12 >= totalHits) {\n        this.setState({ isEnd: true });\n        toast(\"We're sorry, but you've reached the end of search results.\", {\n          icon: '👏',\n          style: {\n            borderRadius: '10px',\n            background: '#333',\n            color: '#fff',\n          },\n        });\n      }\n\n      this.setState(prevState => ({\n        images: currentPage === 1 ? hits : [...prevState.images, ...hits],\n        isEnd: prevState.images.length + hits.length >= totalHits,\n      }));\n    } catch (error) {\n      this.setState({ isError: true });\n      toast.error('Oops, something went wrong! Reload this page!');\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  };\n\n  handleSearchSubmit = query => {\n    const normalizedQuery = query.trim().toLowerCase();\n    const normalizedCurrentQuery = this.state.searchQuery.toLowerCase();\n\n    if (normalizedQuery === '') {\n      alert(`Empty string is not a valid search query. Please type again.`);\n      return;\n    }\n\n    if (normalizedQuery === normalizedCurrentQuery) {\n      alert(\n        `Search query is the same as the previous one. Please provide a new search query.`\n      );\n      return;\n    }\n\n    if (normalizedQuery !== normalizedCurrentQuery) {\n      this.setState({\n        searchQuery: normalizedQuery,\n        currentPage: 1,\n        images: [],\n        isEnd: false,\n      });\n    }\n  };\n\n  handleLoadMore = () => {\n    if (!this.state.isEnd) {\n      this.setState(prevState => ({ currentPage: prevState.currentPage + 1 }));\n    } else {\n      alert(\"You've reached the end of the search results.\");\n    }\n  };\n\n  render() {\n    const { images, isLoading, isError, isEnd } = this.state;\n    return (\n      <div className={styles.App}>\n        <SearchBar onSubmit={this.handleSearchSubmit} />\n        <ImageGallery images={images} />\n        {isLoading && <Loader />}\n        {!isLoading && !isError && images.length > 0 && !isEnd && (\n          <Button onClick={this.handleLoadMore} />\n        )}\n        {isError && <p>Something went wrong. Please try again later.</p>}\n        <Toaster position=\"top-right\" reverseOrder={false} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}